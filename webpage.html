<html>
    <head>
	<link rel="stylesheet" href="css.css">
        <title>The News News</title>
    </head>
    <body>
        
        <h1>The News News</h1>
        <div class="topnav">
            <a class="active" href="webpage.html">By Date</a>
            <a href="byTitle.html">By Title</a>
            <a href="byAuthor.html">By Author</a>
            <a href="byTopic.html">By Topic</a>
        </div>
        <div class="bottomnav">
          <input id="searchbar" onkeyup="search_articles()" type="text" name="search" placeholder="Search..">
        </div>
        <div class="bio">
        <p>Welcome to our catalog, have fun browsing!</p>
        </div>
        <div class="main" id="main">
            
        </div>
        
    <div id="output"></div>
    <script>
      fetch('parsed.json')
        .then(function (response) {
          return response.json();
        })
        .then(function (data) {
          appendData(data);
          //alert();
        })
        .catch(function (err) {
          console.log('error: ' + err);
        });
      function appendData(data) {
        //alert();
        var mainContainer = document.getElementById("output");
        //alert();
        var english = /^[A-Za-z0-9 ]*$/;
        for (var i = 0; i < data.length; i++) {
          var div = document.createElement("div");
          var author = data[i].author;
          author = author.substring(2, author.length - 2);
          var description = data[i].description;
          if (!english.test(description)) {
            //alert(description);
            continue;
          }
          var date = data[i].publishedAt;
          var sourceName = data[i].source_name;
          var sourceUrl = data[i].source_url;
          var title = data[i].title;
          if (!english.test(title)) {
            //alert(title);
            continue;
          }
          var url = data[i].url;
          var picture = data[i].urlToImage;
          div.innerHTML = '<div class="article" style="border:1px; border-style:solid;"> <div class="container">' +
            '<h2><b>' + title + '</b></h2></div>' +
            '<img src="' + picture + '" alt="image">' +
            '<div class="container"><p>' + description + '</p></div>' +
            '<div class="container"<p>URL: ' + url + '<br>Source Name: ' + sourceName + '<br>Author: ' + author + '</p>' +
            '<p class="date">Date: ' + date + '</p></div></div>';
          //alert(test);
          mainContainer.appendChild(div);
        }
      }
    </script>
    <script>
      function search_articles() {
    let input = document.getElementById('searchbar').value
    input=input.toLowerCase();
    let x = document.getElementsByClassName('article');
      
    for (i = 0; i < x.length; i++) { 
        if (!x[i].innerHTML.toLowerCase().includes(input)) {
            x[i].style.display="none";
        }
        else {
            x[i].style.display="list-item";                 
        }
    }
}
    </script>
</body>
<footer>
  <p>&copy; 2023 The News News</p>
</footer>

</html>
